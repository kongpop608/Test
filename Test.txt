<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quarterly Theory: Ultimate Setup Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Kanit', sans-serif; background-color: #ffffff; color: #111; }
        .font-header { font-family: 'Oswald', sans-serif; }
        
        /* Theme Colors */
        .qt-red { color: #dc2626; }
        .bg-qt-red { background-color: #dc2626; }
        .border-qt-red { border-color: #dc2626; }
        .qt-black { background-color: #0f0f0f; color: white; }
        
        /* Interactive Elements */
        .cycle-btn { transition: all 0.3s ease; border-bottom: 3px solid transparent; opacity: 0.6; }
        .cycle-btn:hover { opacity: 1; background-color: #f3f4f6; }
        .cycle-btn.active { border-color: #dc2626; font-weight: 700; opacity: 1; color: #dc2626; background-color: #fff; }

        .bias-toggle { transition: all 0.2s; border: 1px solid #e5e5e5; }
        .bias-toggle:hover { border-color: #000; }
        .bias-active-buy { background-color: #0f0f0f; color: white; border-color: #0f0f0f; }
        .bias-active-sell { background-color: #dc2626; color: white; border-color: #dc2626; }

        /* Chart Labels */
        .chart-label { font-size: 10px; font-weight: bold; font-family: sans-serif; }
        .dashed-line { stroke-dasharray: 4, 4; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-black text-white border-b-4 border-red-600 sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-red-600 w-10 h-10 flex items-center justify-center font-header text-2xl rounded text-white">Q</div>
                <div>
                    <h1 class="font-header text-xl tracking-wider uppercase">Quarterly <span class="text-red-500">Theory</span></h1>
                    <p class="text-[10px] text-gray-400 tracking-widest">MASTER CLASS SETUP GUIDE</p>
                </div>
            </div>
            <div class="hidden md:block text-xs text-gray-500">
                Created for Educational Purpose
            </div>
        </div>
    </header>

    <!-- Cycle Selector Nav -->
    <nav class="bg-white border-b border-gray-200 sticky top-[76px] z-40 shadow-sm overflow-x-auto">
        <div class="container mx-auto px-4">
            <div class="flex space-x-2 md:space-x-8 min-w-max">
                <button onclick="setCycle('yearly')" id="btn-yearly" class="cycle-btn py-4 px-2 text-sm uppercase tracking-wide">1. Yearly Cycle</button>
                <button onclick="setCycle('monthly')" id="btn-monthly" class="cycle-btn py-4 px-2 text-sm uppercase tracking-wide">2. Monthly Cycle</button>
                <button onclick="setCycle('weekly')" id="btn-weekly" class="cycle-btn py-4 px-2 text-sm uppercase tracking-wide">3. Weekly Cycle</button>
                <button onclick="setCycle('daily')" id="btn-daily" class="cycle-btn active py-4 px-2 text-sm uppercase tracking-wide">4. Daily Cycle</button>
                <button onclick="setCycle('90min')" id="btn-90min" class="cycle-btn py-4 px-2 text-sm uppercase tracking-wide">5. 90-Min Cycle</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 flex-grow">
        
        <!-- Section 1: Cycle Info & Bias -->
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <div class="bg-white p-6 border border-gray-200 rounded-lg shadow-sm relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1 h-full bg-black"></div>
                <h2 class="font-header text-2xl mb-4 flex items-center"><i data-lucide="clock" class="w-5 h-5 mr-2 text-red-600"></i> <span id="cycle-title">Daily Cycle</span> Overview</h2>
                
                <div class="space-y-4">
                    <div>
                        <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">True Open (เส้นแบ่งเขต)</h4>
                        <div class="p-3 bg-gray-50 border border-gray-100 rounded text-sm font-medium" id="true-open-info">
                            00:00 New York Time (Midnight Open)
                        </div>
                    </div>
                    <div>
                        <h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">วิธีการดู Bias</h4>
                        <div class="p-3 bg-gray-50 border border-gray-100 rounded text-sm text-gray-600" id="bias-info">
                            ดูแท่ง Daily ของวันก่อนหน้า: ถ้าปิดเหนือ High เดิม = Bullish, ถ้าปิดต่ำกว่า Low เดิม = Bearish
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bias Selector Controls -->
            <div class="bg-white p-6 border border-gray-200 rounded-lg shadow-sm flex flex-col justify-center items-center text-center">
                <h3 class="font-header text-xl mb-6">SELECT YOUR SETUP</h3>
                <div class="flex gap-4 w-full max-w-md">
                    <button onclick="setBias('buy')" id="btn-buy" class="bias-toggle flex-1 py-4 px-6 rounded text-lg font-bold flex items-center justify-center gap-2">
                        <i data-lucide="trending-up" class="w-5 h-5"></i> BUY / LONG
                    </button>
                    <button onclick="setBias('sell')" id="btn-sell" class="bias-toggle flex-1 py-4 px-6 rounded text-lg font-bold flex items-center justify-center gap-2">
                        <i data-lucide="trending-down" class="w-5 h-5"></i> SELL / SHORT
                    </button>
                </div>
                <p class="mt-4 text-xs text-gray-400">คลิกเพื่อเปลี่ยนแผนการเทรดและกราฟตัวอย่าง</p>
            </div>
        </div>

        <!-- Section 2: Chart Simulation & Setup -->
        <div class="grid lg:grid-cols-12 gap-8">
            
            <!-- Left: Step-by-Step Guide -->
            <div class="lg:col-span-4 space-y-4">
                <div class="flex items-center gap-2 mb-2">
                    <span id="setup-badge" class="px-2 py-1 bg-black text-white text-[10px] font-bold uppercase rounded">SETUP LOADING</span>
                    <span class="text-xs text-gray-400 font-bold">/ EXECUTION STEPS</span>
                </div>

                <!-- Steps Container (Dynamic) -->
                <div id="steps-container" class="space-y-4">
                    <!-- Steps will be injected here -->
                </div>
            </div>

            <!-- Right: The Visual Chart (SVG) -->
            <div class="lg:col-span-8">
                <div class="bg-white border-2 border-gray-100 rounded-xl shadow-xl overflow-hidden sticky top-28">
                    <div class="bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center">
                        <h3 class="font-header text-lg text-red-600 flex items-center gap-2">
                            <i data-lucide="monitor" class="w-4 h-4"></i>
                            <span id="chart-title">SETUP VISUALIZER</span>
                        </h3>
                        <div class="flex gap-2">
                            <div class="flex items-center gap-1 text-[10px] font-bold"><span class="w-2 h-2 rounded-full bg-black"></span> XAUUSD</div>
                            <div class="flex items-center gap-1 text-[10px] font-bold"><span class="w-2 h-2 rounded-full bg-gray-400"></span> XAGUSD</div>
                        </div>
                    </div>
                    
                    <!-- SVG Container -->
                    <div id="chart-container" class="w-full h-[500px] bg-white relative">
                        <!-- SVG Injected via JS -->
                    </div>

                    <!-- Legend -->
                    <div class="bg-black text-white p-4 text-xs grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div><span class="text-red-500 font-bold">SMT:</span> Divergence ระหว่างสินทรัพย์</div>
                        <div><span class="text-red-500 font-bold">SSMT:</span> SMT ระหว่างไตรมาสต่อเนื่อง</div>
                        <div><span class="text-red-500 font-bold">PSP:</span> แท่งเทียนปิดคนละสีที่จุดกลับตัว</div>
                        <div><span class="text-red-500 font-bold">tCISD:</span> ราคาปิดชนะ Open แท่ง Manipulation</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-100 py-10 border-t border-gray-200 mt-12">
        <div class="container mx-auto px-4 text-center">
            <h4 class="font-header text-2xl mb-4">QUARTERLY <span class="text-red-600">THEORY</span></h4>
            <div class="flex justify-center gap-8 mb-6 text-sm text-gray-600">
                <div class="flex flex-col items-center"><i data-lucide="layers" class="mb-2"></i><span>Time Cycles</span></div>
                <div class="flex flex-col items-center"><i data-lucide="bar-chart-2" class="mb-2"></i><span>AMDX Model</span></div>
                <div class="flex flex-col items-center"><i data-lucide="zap" class="mb-2"></i><span>Smart Money</span></div>
            </div>
            <p class="text-xs text-gray-400">&copy; 2025 Quarterly Theory Bootcamp Summary.</p>
        </div>
    </footer>

    <script>
        // --- DATA CONFIGURATION ---
        const cycles = {
            yearly: {
                title: "Yearly Cycle (รอบรายปี)",
                trueOpen: "สัปดาห์แรกของเดือนเมษายน (Start of Q2)",
                bias: "ดูการปิดของแท่ง Q1 (ม.ค.-มี.ค.) หรือใช้โครงสร้างของปีก่อนหน้า",
                steps: {
                    buy: [
                        "รอเวลาเดือนเมษายน (Q2 Start)",
                        "ราคา XAUUSD ต้องลงไปต่ำกว่า True Open (April Open)",
                        "เกิด Sequential SMT ในระดับ Week/Month (ทองทำ Low, เงินไม่ทำ)",
                        "เข้าเทรดเมื่อเห็น PSP และ tCISD ในระดับ Weekly"
                    ],
                    sell: [
                        "รอเวลาเดือนเมษายน (Q2 Start)",
                        "ราคา XAUUSD ต้องขึ้นไปสูงกว่า True Open (April Open)",
                        "เกิด Sequential SMT ในระดับ Week/Month (ทองทำ High, เงินไม่ทำ)",
                        "เข้าเทรดเมื่อเห็น PSP และ tCISD ในระดับ Weekly"
                    ]
                }
            },
            monthly: {
                title: "Monthly Cycle (รอบรายเดือน)",
                trueOpen: "สัปดาห์ที่ 2 ของเดือน (Start of Week 2)",
                bias: "ดูแท่ง Week 1 ว่าปิดอย่างไร (Continuation/Reversal)",
                steps: {
                    buy: [
                        "เข้าสู่สัปดาห์ที่ 2 หรือ 3 ของเดือน",
                        "ราคาย่อตัวลงต่ำกว่า True Open (ราคาเปิด Week 2)",
                        "กวาด Liquidity ของ Week 1 Low (SSMT)",
                        "Confirm ด้วย 4H/1H PSP และ tCISD"
                    ],
                    sell: [
                        "เข้าสู่สัปดาห์ที่ 2 หรือ 3 ของเดือน",
                        "ราคาดีดตัวขึ้นสูงกว่า True Open (ราคาเปิด Week 2)",
                        "กวาด Liquidity ของ Week 1 High (SSMT)",
                        "Confirm ด้วย 4H/1H PSP และ tCISD"
                    ]
                }
            },
            weekly: {
                title: "Weekly Cycle (รอบรายสัปดาห์)",
                trueOpen: "ราคาเปิดของวันอังคาร (Tuesday Open / Asia)",
                bias: "ดูแท่งวันจันทร์ (Monday Range & Close)",
                steps: {
                    buy: [
                        "รอวันอังคาร (Q2) หรือวันพุธ (Q3)",
                        "ราคาลงต่ำกว่า True Week Open (ราคาเปิดวันอังคาร)",
                        "Manipulation: กวาด Low ของวันจันทร์",
                        "หา SMT/PSP ใน Timeframe 1H หรือ 15m"
                    ],
                    sell: [
                        "รอวันอังคาร (Q2) หรือวันพุธ (Q3)",
                        "ราคาขึ้นสูงกว่า True Week Open (ราคาเปิดวันอังคาร)",
                        "Manipulation: กวาด High ของวันจันทร์",
                        "หา SMT/PSP ใน Timeframe 1H หรือ 15m"
                    ]
                }
            },
            daily: {
                title: "Daily Cycle (รอบรายวัน)",
                trueOpen: "00:00 New York Time (Midnight Open)",
                bias: "ดูแท่ง Daily เมื่อวาน (ปิดเหนือ High=Buy / ปิดต่ำ Low=Sell)",
                steps: {
                    buy: [
                        "รอช่วง London (02:00 NY) หรือ NY AM (08:00 NY)",
                        "ราคาต้องอยู่ต่ำกว่า True Day Open (Discount)",
                        "SSMT: ทองหลุด PDL หรือ Asia Low แต่เงินไม่หลุด",
                        "Entry: รอ tCISD (ปิดเหนือ Open แท่งแดง) + Retest FVG"
                    ],
                    sell: [
                        "รอช่วง London (02:00 NY) หรือ NY AM (08:00 NY)",
                        "ราคาต้องอยู่สูงกว่า True Day Open (Premium)",
                        "SSMT: ทองทะลุ PDH หรือ Asia High แต่เงินไม่ทะลุ",
                        "Entry: รอ tCISD (ปิดต่ำกว่า Open แท่งเขียว) + Retest FVG"
                    ]
                }
            },
            '90min': {
                title: "90-Minute Cycle",
                trueOpen: "ราคาเปิดของนาทีที่ 0 ในรอบ 90 นาที (Start of Q1)",
                bias: "ดูโครงสร้างของรอบ 90 นาทีก่อนหน้า หรือ Daily Bias หลัก",
                steps: {
                    buy: [
                        "รอช่วงนาทีที่ 45-90 (Q2/Q3)",
                        "ราคาลงต่ำกว่า True Open ของรอบ",
                        "กวาด Low ของ Q1 (Accumulation)",
                        "Micro SMT: ทองหลุด Q1 Low แต่เงินไม่หลุด -> เข้าด้วย 1m/5m tCISD"
                    ],
                    sell: [
                        "รอช่วงนาทีที่ 45-90 (Q2/Q3)",
                        "ราคาขึ้นสูงกว่า True Open ของรอบ",
                        "กวาด High ของ Q1 (Accumulation)",
                        "Micro SMT: ทองทะลุ Q1 High แต่เงินไม่ทะลุ -> เข้าด้วย 1m/5m tCISD"
                    ]
                }
            }
        };

        let currentCycle = 'daily';
        let currentBias = 'buy';

        // --- VISUAL CHART GENERATOR (The Core Logic) ---
        function generateChart(bias, cycleInfo) {
            const isBuy = bias === 'buy';
            const trueOpenLabel = cycleInfo.trueOpen.split('(')[0];
            
            // Colors
            const colorBuy = "#10b981"; // Green
            const colorSell = "#dc2626"; // Red
            const colorLine = "#000000"; 
            const colorSilver = "#9ca3af"; // Gray for Silver

            // SVG Paths & Elements
            let xauPath, xagPath, candles, annotations;

            if (isBuy) {
                // BUY SCENARIO: XAU makes Lower Low, XAG makes Higher Low
                xauPath = `
                    <path d="M 50 150 L 150 150 L 200 120 L 250 120 L 300 180 L 350 110 L 450 50" fill="none" stroke="black" stroke-width="2" />
                    <circle cx="300" cy="180" r="4" fill="${colorSell}" /> <!-- Sweep Point -->
                `;
                
                xagPath = `
                    <path d="M 50 400 L 150 400 L 200 380 L 250 380 L 300 390 L 350 350 L 450 300" fill="none" stroke="${colorSilver}" stroke-width="2" stroke-dasharray="2" />
                    <circle cx="300" cy="390" r="4" fill="${colorBuy}" /> <!-- Higher Low Point -->
                `;

                candles = `
                    <!-- XAUUSD Candles at Reversal -->
                    <!-- 1. Manipulation Candle (Red - Drops Low) -->
                    <rect x="285" y="140" width="12" height="40" fill="${colorSell}" stroke="black" stroke-width="1"/>
                    <line x1="291" y1="130" x2="291" y2="185" stroke="black" stroke-width="1"/>
                    
                    <!-- 2. PSP Candle (Green - Closes Up) -->
                    <rect x="305" y="140" width="12" height="30" fill="${colorBuy}" stroke="black" stroke-width="1"/>
                    <line x1="311" y1="135" x2="311" y2="175" stroke="black" stroke-width="1"/>
                    
                    <!-- 3. tCISD Candle (Green - Closes Above Prev Open) -->
                    <rect x="325" y="120" width="12" height="40" fill="${colorBuy}" stroke="black" stroke-width="1"/>
                    <line x1="331" y1="115" x2="331" y2="165" stroke="black" stroke-width="1"/>
                `;

                annotations = `
                    <!-- True Open Line -->
                    <line x1="50" y1="150" x2="450" y2="150" stroke="black" stroke-width="1" stroke-dasharray="4"/>
                    <text x="60" y="140" class="chart-label" fill="black">TRUE OPEN: ${trueOpenLabel}</text>

                    <!-- SMT Lines -->
                    <line x1="300" y1="185" x2="300" y2="390" stroke="${colorSell}" stroke-width="1" stroke-dasharray="2"/>
                    
                    <!-- Labels -->
                    <text x="250" y="210" class="chart-label" fill="${colorSell}">↓ XAU: Lower Low (Sweep)</text>
                    <text x="250" y="420" class="chart-label" fill="${colorBuy}">↑ XAG: Higher Low (SSMT)</text>
                    
                    <text x="310" y="100" class="chart-label" fill="${colorBuy}" font-weight="bold">PSP (Green) & tCISD Entry</text>
                    
                    <!-- SMT Fill / FVG -->
                    <rect x="335" y="130" width="40" height="10" fill="#e5e7eb" opacity="0.5"/>
                    <text x="370" y="138" font-size="9" fill="gray">SMT-Fill (FVG)</text>
                `;

            } else {
                // SELL SCENARIO: XAU makes Higher High, XAG makes Lower High
                xauPath = `
                    <path d="M 50 150 L 150 150 L 200 180 L 250 180 L 300 80 L 350 190 L 450 250" fill="none" stroke="black" stroke-width="2" />
                    <circle cx="300" cy="80" r="4" fill="${colorBuy}" /> <!-- Sweep Point -->
                `;
                
                xagPath = `
                    <path d="M 50 400 L 150 400 L 200 420 L 250 420 L 300 410 L 350 450 L 450 480" fill="none" stroke="${colorSilver}" stroke-width="2" stroke-dasharray="2" />
                    <circle cx="300" cy="410" r="4" fill="${colorSell}" /> <!-- Lower High Point -->
                `;

                candles = `
                    <!-- XAUUSD Candles at Reversal -->
                    <!-- 1. Manipulation Candle (Green - Shoots High) -->
                    <rect x="285" y="90" width="12" height="40" fill="${colorBuy}" stroke="black" stroke-width="1"/>
                    <line x1="291" y1="80" x2="291" y2="140" stroke="black" stroke-width="1"/>
                    
                    <!-- 2. PSP Candle (Red - Closes Down) -->
                    <rect x="305" y="100" width="12" height="30" fill="${colorSell}" stroke="black" stroke-width="1"/>
                    <line x1="311" y1="95" x2="311" y2="135" stroke="black" stroke-width="1"/>
                    
                    <!-- 3. tCISD Candle (Red - Closes Below Prev Open) -->
                    <rect x="325" y="120" width="12" height="40" fill="${colorSell}" stroke="black" stroke-width="1"/>
                    <line x1="331" y1="115" x2="331" y2="165" stroke="black" stroke-width="1"/>
                `;

                annotations = `
                    <!-- True Open Line -->
                    <line x1="50" y1="150" x2="450" y2="150" stroke="black" stroke-width="1" stroke-dasharray="4"/>
                    <text x="60" y="140" class="chart-label" fill="black">TRUE OPEN: ${trueOpenLabel}</text>

                    <!-- SMT Lines -->
                    <line x1="300" y1="80" x2="300" y2="410" stroke="${colorBuy}" stroke-width="1" stroke-dasharray="2"/>
                    
                    <!-- Labels -->
                    <text x="250" y="60" class="chart-label" fill="${colorBuy}">↑ XAU: Higher High (Sweep)</text>
                    <text x="250" y="370" class="chart-label" fill="${colorSell}">↓ XAG: Lower High (SSMT)</text>
                    
                    <text x="310" y="200" class="chart-label" fill="${colorSell}" font-weight="bold">PSP (Red) & tCISD Entry</text>
                     <!-- SMT Fill / FVG -->
                    <rect x="335" y="140" width="40" height="10" fill="#e5e7eb" opacity="0.5"/>
                    <text x="370" y="148" font-size="9" fill="gray">SMT-Fill (FVG)</text>
                `;
            }

            return `
                <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
                    <!-- Background Grid -->
                    <defs>
                        <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">
                            <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#f0f0f0" stroke-width="1"/>
                        </pattern>
                    </defs>
                    <rect width="100%" height="100%" fill="url(#grid)" />
                    
                    <!-- Divider between Charts -->
                    <line x1="0" y1="250" x2="500" y2="250" stroke="#eee" stroke-width="4" />
                    <text x="10" y="20" font-weight="bold" font-family="sans-serif" font-size="14">XAUUSD</text>
                    <text x="10" y="280" font-weight="bold" font-family="sans-serif" font-size="14" fill="gray">XAGUSD (Correlated Asset)</text>

                    ${xauPath}
                    ${candles}
                    ${xagPath}
                    ${annotations}
                </svg>
            `;
        }

        // --- RENDER LOGIC ---
        function setCycle(cycle) {
            currentCycle = cycle;
            
            // Update Buttons
            document.querySelectorAll('.cycle-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${cycle}`).classList.add('active');

            render();
        }

        function setBias(bias) {
            currentBias = bias;

            // Update Bias Buttons
            const btnBuy = document.getElementById('btn-buy');
            const btnSell = document.getElementById('btn-sell');

            if (bias === 'buy') {
                btnBuy.className = "bias-toggle bias-active-buy flex-1 py-4 px-6 rounded text-lg font-bold flex items-center justify-center gap-2 transform scale-105 shadow-md";
                btnSell.className = "bias-toggle bg-white text-gray-400 flex-1 py-4 px-6 rounded text-lg font-bold flex items-center justify-center gap-2 opacity-50 hover:opacity-100";
            } else {
                btnBuy.className = "bias-toggle bg-white text-gray-400 flex-1 py-4 px-6 rounded text-lg font-bold flex items-center justify-center gap-2 opacity-50 hover:opacity-100";
                btnSell.className = "bias-toggle bias-active-sell flex-1 py-4 px-6 rounded text-lg font-bold flex items-center justify-center gap-2 transform scale-105 shadow-md";
            }

            render();
        }

        function render() {
            const data = cycles[currentCycle];
            const isBuy = currentBias === 'buy';

            // 1. Text Info
            document.getElementById('cycle-title').innerText = data.title;
            document.getElementById('true-open-info').innerText = data.trueOpen;
            document.getElementById('bias-info').innerText = data.bias;

            // 2. Steps
            const stepsHtml = data.steps[currentBias].map((step, index) => `
                <div class="bg-white p-4 rounded border border-gray-200 shadow-sm flex gap-4 hover:border-black transition-colors">
                    <div class="flex-shrink-0 w-6 h-6 rounded-full ${isBuy ? 'bg-black' : 'bg-red-600'} text-white flex items-center justify-center font-bold text-sm">${index + 1}</div>
                    <p class="text-sm text-gray-700">${step}</p>
                </div>
            `).join('');
            document.getElementById('steps-container').innerHTML = stepsHtml;

            // 3. Badge
            const badge = document.getElementById('setup-badge');
            badge.innerText = `${currentCycle.toUpperCase()} : ${currentBias.toUpperCase()} SETUP`;
            badge.className = `px-2 py-1 ${isBuy ? 'bg-black' : 'bg-red-600'} text-white text-[10px] font-bold uppercase rounded`;

            // 4. Chart Title
            const chartTitle = document.getElementById('chart-title');
            chartTitle.innerHTML = isBuy ? 
                `SETUP VISUALIZER: <span class="text-green-600">BULLISH (BUY)</span>` : 
                `SETUP VISUALIZER: <span class="text-red-600">BEARISH (SELL)</span>`;

            // 5. Generate Chart
            document.getElementById('chart-container').innerHTML = generateChart(currentBias, data);
            
            // Re-init Icons
            lucide.createIcons();
        }

        // Initialize
        setCycle('daily');
        setBias('buy');

    </script>
</body>
</html>